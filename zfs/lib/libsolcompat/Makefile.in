subdir-m += amd64 i386 sparc64 include
DISTFILES  = atomic_asm_weak.h gen_synonyms.h getmntany.c
DISTFILES += mkdirp.c synonyms.h tsd.h zone.c

LIBRARY := libsolcompat

# Compile as shared library.  There's an extra useless host program
# here called 'zu' because it was the easiest way I could convince
# the kernel build system to construct a user space shared library.

HOSTCFLAGS += @HOSTCFLAGS@
HOSTCFLAGS += -I@LIBDIR@/libsolcompat/include
HOSTCFLAGS += -I@LIBDIR@/libport/include

hostprogs-y := zu
always := $(hostprogs-y)

zu-objs := zu.o ${LIBRARY}.so

${LIBRARY}-objs += getmntany.o
${LIBRARY}-objs += mkdirp.o
${LIBRARY}-objs += zone.o
